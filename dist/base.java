
import java.awt.Cursor;
import java.awt.Point;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileInputStream;
import javax.swing.Timer;
import javax.swing.*;
import sun.audio.AudioPlayer;
import sun.audio.AudioStream;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author DEEPAK
 */
public class base extends javax.swing.JFrame {

    /**
     * Creates new form base
     */
    static int level=1;
    static AudioStream first;
    static String s;
    static boolean game_sound=true;
    JLabel bullets[]=new JLabel[10];
    int bullet_x=70;
    int x=-130,y=150; 
     Timer t1,t2,back_ground;
     int count_bullets=10;
     ImageIcon bullet=new ImageIcon("bullet.png");
    public base() {
    
        for(int i=0;i<10;++i)
        {
            bullets[i]=new JLabel();
            bullets[i].setIcon(bullet);
            bullets[i].setBounds(1200-bullet_x,0,100,50);
            add(bullets[i]);
            bullets[i].setVisible(true);
            bullet_x+=40;
        }
        initComponents();
        if(game_sound==false)
        {
            s="none";
        }
        
        
        setSize(1215,720);
        
        if(first==null)
        {
            s="DEATH NOTE";
        try{
             FileInputStream fin=new FileInputStream(s+".au");
             first=new AudioStream(fin);
             AudioPlayer.player.start(first);
            }
            catch(Exception x)
            {}
        back_ground=new Timer(420*1000,new back_ground_music());
        back_ground.start();
        }
        else if(s.equals("none"))
        {}
        else
        {
           AudioPlayer.player.start(first);
           back_ground=new Timer(420*1000,new back_ground_music());
           back_ground.start();
        }
        
        
        t1=new Timer(50/level,new fly());
        t1.start();
        t2=new Timer(25/level,new fall());
     }
    
    public class back_ground_music implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent e) {
            
            try{
             FileInputStream fin=new FileInputStream(s+".au");
             AudioStream a=new AudioStream(fin);
             a=first;
             AudioPlayer.player.stop(a);
             AudioPlayer.player.start(a);
             first=a;
            }
            catch(Exception x)
            {}
            
        }
        
        
    }
 
    public class fly implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent e) {
            
            
            jLabel2.setBounds(x,y,130,104);
            x=x+10;
            if(x>=1200)
            {
                y=((int)(Math.random()*(700-104))+150);
                if(y>(700-104))
                    y=y-104-150;
                x=-130;
            }       
        }
    }
    public class fall implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent e){
        
            jLabel2.setBounds(x,y,100,100);
            y=y+10;
            if(y>=700)
            {
                t2.stop();
                jLabel2.setIcon(new ImageIcon("bird.gif"));
                x=0;
                y=((int)(Math.random()*(700-104))+150);
                if(y>(700-104))
                    y=y-104-150;
                t1.start();
            }
            
        }
        
    }
    public void play_sound()
    {
        try{
            if(count_bullets<1)
            {
                if(game_sound)
                {
                FileInputStream fin=new FileInputStream("empty.au");
                AudioStream a=new AudioStream(fin);
                AudioPlayer.player.start(a);
                }
                if(count_bullets==0)
                    --count_bullets;
            }
            else
            {
                if(game_sound)
                {
                FileInputStream fin=new FileInputStream("sound.au");
                AudioStream a=new AudioStream(fin);
                AudioPlayer.player.start(a);
                }
                bullets[count_bullets-1].setVisible(false);
                --count_bullets;
            }
        }catch(Exception e)
        {}
        //bullets[count_bullets].setVisible(false);
        //--count_bullets;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();
        jLabel2 = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(null);

        jPanel1.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jPanel1FocusGained(evt);
            }
        });
        jPanel1.setLayout(null);

        jButton1.setText("Menu");
        jButton1.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        jButton1.setFocusPainted(false);
        jButton1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jButton1MouseEntered(evt);
            }
        });
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jPanel1.add(jButton1);
        jButton1.setBounds(0, 0, 70, 30);

        jLabel2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/bird.gif"))); // NOI18N
        jLabel2.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel2MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jLabel2MouseEntered(evt);
            }
        });
        jPanel1.add(jLabel2);
        jLabel2.setBounds(0, 40, 110, 90);

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/rsz_angrynew.png"))); // NOI18N
        jLabel1.setText("jLabel1");
        jLabel1.setMaximumSize(new java.awt.Dimension(1200, 700));
        jLabel1.setMinimumSize(new java.awt.Dimension(1200, 700));
        jLabel1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel1MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jLabel1MouseEntered(evt);
            }
        });
        jPanel1.add(jLabel1);
        jLabel1.setBounds(0, 0, 1200, 700);

        getContentPane().add(jPanel1);
        jPanel1.setBounds(0, 0, 1200, 700);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jLabel2MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel2MouseClicked

       play_sound();
       if(count_bullets>=0)
       {
       ImageIcon img=new ImageIcon("fall.png");
       jLabel2.setIcon(img);
       t1.stop();
       t2.start();
       }
    }//GEN-LAST:event_jLabel2MouseClicked

    private void jLabel1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel1MouseClicked

            play_sound();
    }//GEN-LAST:event_jLabel1MouseClicked

    private void jLabel2MouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel2MouseEntered

        Toolkit tool1=Toolkit.getDefaultToolkit();
        ImageIcon i=new ImageIcon("target.png");
        Cursor c=tool1.createCustomCursor(i.getImage(),new Point(0,0), "name");
        setCursor(c);
    }//GEN-LAST:event_jLabel2MouseEntered

    private void jLabel1MouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel1MouseEntered
      
        Toolkit tool1=Toolkit.getDefaultToolkit();
        ImageIcon i=new ImageIcon("target.png");
        Cursor c=tool1.createCustomCursor(i.getImage(),new Point(0,0), "name");
        setCursor(c);
    }//GEN-LAST:event_jLabel1MouseEntered

    private void jButton1MouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton1MouseEntered

         
        
    }//GEN-LAST:event_jButton1MouseEntered

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
      
        if(game_sound)
            AudioPlayer.player.stop(first);
        menu m=new menu();
        m.setVisible(true);
        dispose();
        
    }//GEN-LAST:event_jButton1ActionPerformed

    private void jPanel1FocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jPanel1FocusGained
            
    }//GEN-LAST:event_jPanel1FocusGained

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
       
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
               base b = new base();
               b.setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    // End of variables declaration//GEN-END:variables
}
